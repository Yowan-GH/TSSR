
**Centreon** est un outil de **supervision réseau et système**.  
Il permet de surveiller des hôtes (serveurs, équipements réseau...) et leurs services (CPU, HTTP, RAM...).
## 🧠 A installer

### ✅ À installer sur le **serveur Centreon** (poste de supervision)

|Composant|Rôle|Obligatoire|
|---|---|---|
|Centreon Web|Interface graphique Web|✅|
|Centreon Engine|Moteur de supervision|✅|
|Centreon Broker|Transfert des données vers Web & DB|✅|
|Base de données (MariaDB)|Stockage de la config, des statuts et historiques|✅|
|Centreon Plugins|Sondes modernes (Perl)|✅|
|Nagios Plugins|Sondes classiques (check_ping, etc.)|✅|
|NRPE client (check_nrpe)|Pour interroger des hôtes Linux via NRPE|Selon besoin|

### 📍 À installer / configurer sur les **clients supervisés**

### 🐧 **Linux** :

|Méthode|À installer|Notes|
|---|---|---|
|**NRPE**|`nrpe` + **Nagios Plugins**|Permet d'exécuter des checks locaux depuis Centreon|
|**SNMP**|`snmpd` (Agent SNMP)|Nécessite configuration (community, version…)|
### 🪟 **Windows** :

|Méthode|À installer|Notes|
|---|---|---|
|**NSClient++**|NSClient++|Un seul agent, compatible **NRPE**, **NRDP**, **WMI**, **local checks**|

✅ **Donc oui** :
- **Linux** → soit _NRPE + plugins_, soit _SNMP_
- **Windows** → un seul agent **NSClient++** suffit pour tout

## 🔍 Fonctionnement général
- Centreon fonctionne à l’aide de **sondes** (aussi appelées **checks**).
- Un **check** est une **commande** qui appelle un **script ou plugin** pour effectuer une vérification.
    
- Les scripts exécutés peuvent être :
    - des **Nagios plugins**
    - des **Centreon plugins**
    - ou des appels via **SNMP**, **NRPE**, etc.

## 📦 Organisation recommandée

Pour assurer une configuration **réutilisable, propre et scalable**, on utilise des **modèles** :
#### 🎯 Modèles de service
- Un **modèle de service fonctionnel** contient :
    - la **commande de vérification**
    - des **macros** (seuils, chemins, versions...)
- Il peut **hériter** d’un **modèle de configuration de service**, qui centralise les paramètres génériques (intervalle, période, nombre de tentatives...)

#### 🧱 Modèles d’hôte
- Un **modèle d’hôte** contient les informations communes à une famille de machines (Linux, Windows, imprimantes…)
- Il regroupe et **déploie automatiquement plusieurs modèles de services**

## Enchaînement logique du fonctionnement de Centreon (avec macros)

```markdown
Centreon Engine
    ↓
Modèle d’Hôte (HTF / HTC)
    ↳ Définit des macros d’hôte : $_HOSTSNMPVERSION$, $_HOSTCOMMUNITY$, ...
    ↓
Modèle de Service (STF / STC)
    ↳ Définit des macros de service : $_SERVICEWARNING$, $_SERVICECRITICAL$, ...
    ↓
Commande (Check)
    ↳ Contient la syntaxe d’appel du script avec macros : 
       --hostname=$HOSTADDRESS$ 
       --warning=$_SERVICEWARNING$ 
       --community=$_HOSTCOMMUNITY$
    ↓
Plugin / Script (Sonde réelle)
    ↳ Exécute la vérification et retourne un statut (OK, WARNING, etc.)

```


